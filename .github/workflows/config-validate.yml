name: config-validate

on:

  pull_request:
  push:
    branches: [ main ]


jobs:
  validate:
    runs-on: ubuntu-latest
    steps:

      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup .NET (for tooling, if needed)
        uses: actions/setup-dotnet@v3
        with:
          dotnet-version: '7.0.x'

      - name: Setup Unity Editor
        uses: game-ci/unity-actions/setup@v4
        with:
          unityVersion: '2022.3.0f1'

      - name: Activate Unity (requires UNITY_LICENSE secret)
        uses: game-ci/unity-actions/activate@v4
        with:
          unityLicense: ${{ secrets.UNITY_LICENSE }}

      - name: Run config validation (batchmode)
        run: |
          echo "Running config validation"
          $UNITY_PATH/Editor/Unity \
            -batchmode \
            -projectPath UnityGame \
            -executeMethod Game.ConfigValidation.Run \
            -quit -nographics -logFile -

